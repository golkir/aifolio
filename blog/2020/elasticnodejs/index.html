<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="google-site-verification=mxT-kXkFbbMzev31Xd0qz1VEPrAz0tiw3tTEBZYFB9Q"> <meta name="msvalidate.01" content=""> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Integrating Elasticsearch Into Your Node.js Application | Kirill A. Goltsman </title> <meta name="author" content="Kirill A. Goltsman"> <meta name="description" content="Kirill Goltsman - software engineer and tech writer, AI/ML, statistics, blockchain. "> <meta name="keywords" content="Artificial Intelligence, Machine Learning, data science"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%E2%9A%9B%EF%B8%8F&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://golkir.github.io/blog/2020/elasticnodejs/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Kirill</span> A. Goltsman </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item active"> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">Integrating Elasticsearch Into Your Node.js Application</h1> <p class="post-meta"> Created in April 12, 2020 </p> <p class="post-tags"> <a href="/blog/2020"> <i class="fa-solid fa-calendar fa-sm"></i> 2020 </a>   ·   <a href="/blog/tag/elasticsearch"> <i class="fa-solid fa-hashtag fa-sm"></i> elasticsearch</a>   ·   <a href="/blog/category/sample-posts"> <i class="fa-solid fa-tag fa-sm"></i> sample-posts</a> </p> </header> <article class="post-content"> <div id="markdown-content"> <p>In previous tutorials, we have already discussed how to use Elasticsearch native clients in <a href="https://qbox.io/blog/elasticsearch-rest-client-idiomatic-rust-tutorial" rel="external nofollow noopener" target="_blank">Rust</a>, <a href="https://qbox.io/blog/rest-calls-new-java-elasticsearch-client-tutorial?utm_source=qbox.io&amp;utm_medium=article&amp;utm_campaign=elasticsearch-rest-client-idiomatic-rust-tutorial" rel="external nofollow noopener" target="_blank">Java</a>, and <a href="https://qbox.io/blog/python-scripts-interact-elasticsearch-examples?utm_source=qbox.io&amp;utm_medium=article&amp;utm_campaign=elasticsearch-rest-client-idiomatic-rust-tutorial" rel="external nofollow noopener" target="_blank">Python</a> among others. Today, we’re going to cover Node.js, - a popular JavaScript server-side solution based on event-driven architecture efficient for development of fast servers, I/O heavy applications, and real-time applications (RTAs). Node.js ecosystem is one of the fastest growing and it is now possible to interact with the Elasticsearch API using a Node.js client. <a href="https://github.com/elastic/elasticsearch-js" rel="external nofollow noopener" target="_blank">Elasticsearch.js</a> is the official Elasticsearch client for Node.js that ships with:</p> <ul> <li>one-to-one mapping with Elasticsearch REST API</li> <li>intelligent handling of node/connection failures</li> <li>support for load balancers</li> <li>integration into modern browsers</li> <li>efficient support for asynchronous operations with JavaScript Promises.</li> </ul> <p><a href="https://github.com/elastic/elasticsearch-js" rel="external nofollow noopener" target="_blank">Elasticsearch.js</a> has one of the widest support for standard and advanced Elasticsearch features and is regularly tested against ES releases 0.90.12 and greater. The client is regularly updated and maintained by the vibrant Node.js community.</p> <h2 id="tutorial"><strong>Tutorial</strong></h2> <p>For this tutorial, we will be using hosted Elasticsearch on <a href="https://qbox.io/" rel="external nofollow noopener" target="_blank">Qbox.io</a>. You can sign up and <a href="https://qbox.io/signup?utm_source=blog&amp;utm_campaign=tutorial&amp;utm_term=launch_your_cluster&amp;utm_medium=article" rel="external nofollow noopener" target="_blank">launch Elasticsearch cluster here</a>, or click “Get Started” in the header navigation menu. If you need help setting up, refer to “<a href="https://qbox.io/blog/provisioning-a-qbox-elasticsearch-cluster?utm_source=tutorial&amp;utm_term=provision&amp;utm_medium=article&amp;utm_campaign=index-attachments-files-elasticsearch-mapper" rel="external nofollow noopener" target="_blank">Provisioning a Qbox Elasticsearch Cluster</a>.” Before you proceed to the tutorial, ensure that the latest version of Node.js is installed on your computer. If you are not sure how to do this, please, refer to <a href="https://nodejs.org/uk/download/package-manager/" rel="external nofollow noopener" target="_blank">Node.js installation guide</a> for directions. Once we have Node.js up and running, we need to install Elasticsearch.js in our Node.js application. You can install the official elasticsearch.js module via npm (Node Package Manager) command:</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>npm install elasticsearch
</code></pre></div></div> <p>Using the elasticsearch.js module in Node we can easily connect to and interact with our Elasticsearch cluster on Qbox.io:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">elasticsearch</span> <span class="o">=</span> <span class="nf">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">elasticsearch</span><span class="dl">'</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">client</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">elasticsearch</span><span class="p">.</span><span class="nc">Client</span><span class="p">({</span>
   <span class="na">hosts</span><span class="p">:</span> <span class="p">[</span> <span class="dl">'</span><span class="s1">https://username:password@host:port</span><span class="dl">'</span><span class="p">]</span>
<span class="p">});</span>
</code></pre></div></div> <p>The client constructor accepts a config object/hash where you can define <a href="https://www.elastic.co/guide/en/elasticsearch/client/javascript-api/current/configuration.html" rel="external nofollow noopener" target="_blank">defaults parameters</a>, or even entire classes, for the client to use. In addition, our client variable inherits all methods of the elasticsearch.js Client constructor which corresponds to the official Elasticsearch API.</p> <p>We can now ping to our Qbox.io cluster to check if everything is ok.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nf">ping</span><span class="p">({</span>
     <span class="na">requestTimeout</span><span class="p">:</span> <span class="mi">30000</span><span class="p">,</span>
 <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">if </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">'</span><span class="s1">elasticsearch cluster is down!</span><span class="dl">'</span><span class="p">);</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">'</span><span class="s1">Everything is ok</span><span class="dl">'</span><span class="p">);</span>
     <span class="p">}</span>
 <span class="p">});</span>
</code></pre></div></div> <p>If something goes wrong, you can debug using the error object returned by the callback. Elasticsearch API also includes other useful methods to inspect your Qbox.io cluster. For example, using a cluster object you can check cluster health (<strong>cluster.health</strong>), stats, current state (e.g operational), and more.</p> <h2 id="features-of-elasticsearchjs"><strong>Features of Elasticsearch.js</strong></h2> <p>Now, we are going to discuss basic features of elasticsearch.js such as indexing, creating documents, and search.</p> <h2 id="indexing"><strong>Indexing</strong></h2> <p>Unlike conventional databases, an Elasticsearch index is a place to store related documents. In this example, we’re going to create an index ‘blog’ to store ‘posts’ in it. With elasticsearch.js it can be done as easy as that:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nx">client</span><span class="p">.</span><span class="nx">indices</span><span class="p">.</span><span class="nf">create</span><span class="p">({</span>
     <span class="na">index</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span>
 <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
     <span class="k">if </span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">err</span><span class="p">);</span>
     <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
         <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="dl">"</span><span class="s2">create</span><span class="dl">"</span><span class="p">,</span> <span class="nx">resp</span><span class="p">);</span>
     <span class="p">}</span>
 <span class="p">});</span>
</code></pre></div></div> <p>If the index already exists, you get <strong>‘index_already_exists_exception’</strong>. Otherwise, a new index ready to store your documents is created.</p> <h2 id="adding-documents-to-an-index"><strong>Adding Documents to an Index</strong></h2> <p>Now as we’ve got an index, we need some documents to post to it. For that purpose, we are going to index a new document with a type ‘posts’.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nx">client</span><span class="p">.</span><span class="nf">index</span><span class="p">({</span>
     <span class="na">index</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span><span class="p">,</span>
     <span class="na">id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">,</span>
     <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
     <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
         <span class="dl">"</span><span class="s2">PostName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Integrating Elasticsearch Into Your Node.js Application</span><span class="dl">"</span><span class="p">,</span>
         <span class="dl">"</span><span class="s2">PostType</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">Tutorial</span><span class="dl">"</span><span class="p">,</span>
         <span class="dl">"</span><span class="s2">PostBody</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">This is the text of our tutorial about using Elasticsearch in your Node.js application.</span><span class="dl">"</span><span class="p">,</span>
     <span class="p">}</span>
 <span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">,</span> <span class="nx">resp</span><span class="p">,</span> <span class="nx">status</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">resp</span><span class="p">);</span>
 <span class="p">});</span>
</code></pre></div></div> <p>Here, the body is a typed JSON document in an index that makes it searchable. We have defined a body object with key parameters of our document: <strong>PostName, PostType, and PostBody</strong>. You can add whatever parameters of the blog post you need. The inner process of posting a new document works like this. If <strong>id</strong> param is not specified, Elasticsearch will auto-generate a unique <strong>id</strong>. In case you specify an <strong>id</strong>, Elasticsearch will either create a new document (if it does not exist) or update an existing one. Similarly, Elasticsearch will perform optimistic concurrency control when the version argument is used. If the document is successfully saved, we get the following response from the server:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="nl">_index</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_version</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
  <span class="nx">result</span><span class="p">:</span> <span class="dl">'</span><span class="s1">created</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_shards</span><span class="p">:</span> <span class="p">{</span> <span class="nl">total</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">successful</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">failed</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
  <span class="nx">created</span><span class="p">:</span> <span class="kc">true</span> <span class="p">}</span>
</code></pre></div></div> <p>If the index exists and we didn’t specify a version argument, the existing document will be simply updated by the new one and specified as its second version.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="nl">_index</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_id</span><span class="p">:</span> <span class="dl">'</span><span class="s1">1</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_version</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
  <span class="nx">result</span><span class="p">:</span> <span class="dl">'</span><span class="s1">updated</span><span class="dl">'</span><span class="p">,</span>
  <span class="nx">_shards</span><span class="p">:</span> <span class="p">{</span> <span class="nl">total</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">successful</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">failed</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
  <span class="nx">created</span><span class="p">:</span> <span class="kc">false</span> <span class="p">}</span>
</code></pre></div></div> <p>In addition to creating documents, elasticsearch.js supports index flushing, analysis, recovery, creation of mappings, simulation, and other advanced methods.</p> <p>**</p> <h2 id="search-documents-using-query-params"><strong>Search Documents Using Query Params</strong></h2> <p>** Elasticsearch.js has a mature search functionality that supports both simple queries and Elasticsearch Query DSL. To search documents using simple query you need to specify a <strong>‘q’</strong> parameter in your request object. In this example, we are searching for all posts with “Node.js” in the post title.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nf">search</span><span class="p">({</span>
    <span class="na">index</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">q</span><span class="p">:</span> <span class="dl">'</span><span class="s1">PostName:Node.js</span><span class="dl">'</span>
<span class="p">}).</span><span class="nf">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">resp</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">trace</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div> <p>**</p> <h2 id="elasticsearch-query-dsl"><strong>Elasticsearch Query DSL</strong></h2> <p>** If you want to have a fine-grained control over document search, Elasticsearch offers a query DSL.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">client</span><span class="p">.</span><span class="nf">search</span><span class="p">({</span>
    <span class="na">index</span><span class="p">:</span> <span class="dl">'</span><span class="s1">blog</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">type</span><span class="p">:</span> <span class="dl">'</span><span class="s1">posts</span><span class="dl">'</span><span class="p">,</span>
    <span class="na">body</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">query</span><span class="p">:</span> <span class="p">{</span>
            <span class="na">match</span><span class="p">:</span> <span class="p">{</span>
                <span class="dl">"</span><span class="s2">PostName</span><span class="dl">"</span><span class="p">:</span> <span class="dl">'</span><span class="s1">Node.js</span><span class="dl">'</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}).</span><span class="nf">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">resp</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">log</span><span class="p">(</span><span class="nx">resp</span><span class="p">);</span>
<span class="p">},</span> <span class="kd">function</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">console</span><span class="p">.</span><span class="nf">trace</span><span class="p">(</span><span class="nx">err</span><span class="p">.</span><span class="nx">message</span><span class="p">);</span>
<span class="p">});</span>
</code></pre></div></div> <p>A successful response looks like this:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="nl">took</span><span class="p">:</span> <span class="mi">407</span><span class="p">,</span>
  <span class="nx">timed_out</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">_shards</span><span class="p">:</span> <span class="p">{</span> <span class="nl">total</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">successful</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">failed</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
  <span class="nx">hits</span><span class="p">:</span> <span class="p">{</span> <span class="nl">total</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="nx">max_score</span><span class="p">:</span> <span class="mf">0.26742277</span><span class="p">,</span> <span class="nx">hits</span><span class="p">:</span> <span class="p">[</span> <span class="p">[</span><span class="nb">Object</span><span class="p">]</span> <span class="p">]</span> <span class="p">}</span> <span class="p">}</span>
</code></pre></div></div> <p>It shows that a total number of documents with the title that matches the query (‘Node.js’) is equal to one.</p> <p>If no documents match the query, Qbox ElasticSearch returns:</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span> <span class="nl">took</span><span class="p">:</span> <span class="mi">69</span><span class="p">,</span>
  <span class="nx">timed_out</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nx">_shards</span><span class="p">:</span> <span class="p">{</span> <span class="nl">total</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">successful</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="nx">failed</span><span class="p">:</span> <span class="mi">0</span> <span class="p">},</span>
  <span class="nx">hits</span><span class="p">:</span> <span class="p">{</span> <span class="nl">total</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nx">max_score</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span> <span class="nx">hits</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span> <span class="p">}</span>
</code></pre></div></div> <p>Elasticsearch.js supports all Query DSL features including leaf clauses and compound clauses. As an added bonus, you can use wildcard searches and regular expressions. In the example below, we create a query for all matches where ‘.js’ is preceded by four characters.</p> <div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">query</span><span class="p">:</span> <span class="p">{</span> <span class="nl">wildcard</span><span class="p">:</span> <span class="p">{</span> <span class="dl">"</span><span class="s2">PostBody</span><span class="dl">"</span><span class="p">:</span> <span class="dl">"</span><span class="s2">????.js</span><span class="dl">"</span> <span class="p">}</span> <span class="p">}</span>
</code></pre></div></div> <h2 id="conclusion"><strong>Conclusion</strong></h2> <p>Elasticsearch.js is a very mature Elasticsearch client for Node.js able to handle basic use cases and supporting many advanced ones. In addition to the aforementioned functionality, elasticsearch.js supports searching of shards, scrolling, bulk operations in a single API call and more. Broad coverage of low-level Elasticsearch functions and leveraging the power of Javascript Promises makes this library the best choice for your Node.js application.</p> </div> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Kirill A. Goltsman. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-projects",title:"projects",description:"check my work.",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-cv",title:"cv",description:"Kirill Goltsman CV",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"post-qbox-vs-self-hosted-elasticsearch",title:"Qbox vs Self-Hosted Elasticsearch",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/qbox-vs-self-hosting/"}},{id:"post-how-to-ship-mysql-logs-to-elasticsearch-with-filebeat",title:"How to ship MySQL Logs to Elasticsearch with Filebeat",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2022/mysql_logs_filebeat_Esearch/"}},{id:"post-how-to-use-elasticsearch-to-visualize-data",title:"How To Use Elasticsearch to Visualize Data?",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2020/how_to_visualize_data_ES/"}},{id:"post-integrating-elasticsearch-into-your-node-js-application",title:"Integrating Elasticsearch Into Your Node.js Application",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2020/elasticnodejs/"}},{id:"post-using-advanced-elasticsearch-methods-with-node-js-elasticsearch-client",title:"Using Advanced Elasticsearch Methods With Node.js Elasticsearch Client",description:"",section:"Posts",handler:()=>{window.location.href="/blog/2019/elasticsearch_advanced_tutorial/"}},{id:"news-a-simple-inline-announcement-with-markdown-emoji-sparkles-smile",title:'A simple inline announcement with Markdown emoji! <img class="emoji" title=":sparkles:" alt=":sparkles:" src="https://github.githubassets.com/images/icons/emoji/unicode/2728.png" height="20" width="20"> <img class="emoji" title=":smile:" alt=":smile:" src="https://github.githubassets.com/images/icons/emoji/unicode/1f604.png" height="20" width="20">',description:"",section:"News"},{id:"news-a-long-announcement-with-details",title:"A long announcement with details",description:"",section:"News",handler:()=>{window.location.href="/news/announcement_2/"}},{id:"news-a-simple-inline-announcement",title:"A simple inline announcement.",description:"",section:"News"},{id:"projects-titled-tuesday-analysis",title:"Titled Tuesday Analysis",description:"Statistical analysis of chess games played in Titled Tuesday events on chess.com",section:"Projects",handler:()=>{window.location.href="/projects/chess-analysis/"}},{id:"projects-llm-finetunning",title:"LLM Finetunning",description:"Finetuning Llama2 on the Dolly 15k instruction dataset",section:"Projects",handler:()=>{window.location.href="/projects/llm-finetuning/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%67%6F%6C%74%73%6D%61%6E%6B@%67%6D%61%69%6C.%63%6F%6D","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/golkir","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/kirillgoltsman","_blank")}},{id:"socials-medium",title:"Medium",section:"Socials",handler:()=>{window.open("https://medium.com/@kirill_86245","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js"></script> </body> </html>